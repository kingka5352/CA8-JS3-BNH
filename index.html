<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="author" content="Jeongman Park">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bear Ninja Hunter</title>
</head>

<body>
  <h1>Bear Ninja Hunter Game</h1>
  <p id="result"></p>

  <script>
    // Store valid game choices in an array
    const choices = ["Bear", "Ninja", "Hunter"];
    let gameHistory = "";
    let playAgain = true;

    // Loop through choices array 
    for (let i = 0; i < choices.length; i++) {
      console.log("Valid choice option:", choices[i]);
    }

    //Welcome the player to the game using a prompt to collect their name:
    let playerName = prompt("Welcome to Bear Hunter Ninja! Please enter your name to get started:");

    // Handle cancel or empty input for player name 
    if (playerName === null || playerName.trim() === "") {
      alert("Please Press F5 to Play Again.");
    } else {
      playerName = playerName.trim();

      //Alert to greet the player with a personalized message.
      alert(`Hi ${playerName}! Let's Play!!`);

      // Loop to allow multiple rounds of gameplay
      while (playAgain) {
        // Prompt the player's choice
        let playerChoice = prompt("Who are you: Bear, Ninja, or Hunter?");

        // Handle cancel or empty input for player choice 
        if (playerChoice === null || playerChoice.trim() === "") {
          alert("Please Press F5 to Play Again.");
          break;
        }

        // Format input: make lowercase, then capitalize the first letter
        playerChoice = playerChoice.trim().toLowerCase();
        playerChoice = playerChoice.charAt(0).toUpperCase() + playerChoice.slice(1);

        // Validate input against available choices
        if (!choices.includes(playerChoice)) {
          const errorMessage = "Invalid Entry<br>Please Press F5 to Play Again.";
          document.getElementById("result").innerHTML += errorMessage + "<br>";
          console.log("Invalid Entry. Please Press F5 to Play Again.");
          alert("Invalid Entry\nPlease Press F5 to Play Again.");
          break;
        }

        // Randomly select computer's choice using array and Math.random()
        let randomIndex = Math.floor(Math.random() * choices.length);
        let computerChoice = choices[randomIndex];

        // Determine winner using conditional operations and switch statements
        let gameResult = "";
        if (computerChoice === "Bear") {
          switch (playerChoice) {
            case "Bear":
              gameResult = "It's a tie!";
              break;
            case "Ninja":
              gameResult = "You Lose!!";
              break;
            case "Hunter":
              gameResult = "You Win!!";
              break;
          }
        } else if (computerChoice === "Ninja") {
          switch (playerChoice) {
            case "Bear":
              gameResult = "You Win!!";
              break;
            case "Ninja":
              gameResult = "It's a tie!";
              break;
            case "Hunter":
              gameResult = "You Lose!!";
              break;
          }
        } else if (computerChoice === "Hunter") {
          switch (playerChoice) {
            case "Bear":
              gameResult = "You Lose!!";
              break;
            case "Ninja":
              gameResult = "You Win!!";
              break;
            case "Hunter":
              gameResult = "It's a tie!";
              break;
          }
        }

        // Display result on HTML page and store in history
        let gameMessage =
          `${playerName} you chose ${playerChoice}!<br>` +
          `The computer chose ${computerChoice}!<br>` +
          `${gameResult}<br>`;
        gameHistory += gameMessage;
        document.getElementById("result").innerHTML = gameHistory;

        // Log result to console
        console.log(
          `${playerName} you chose ${playerChoice}!\n` +
          `The computer chose ${computerChoice}!\n` +
          `${gameResult}`
        );

        // Prompt player to play again
        let again = prompt(`${playerName}, would you like to play again, Yes or No?`);

        // Handle cancel, empty, or "no" input for replay prompt
        if (again === null || again.trim() === "" || again.toLowerCase() !== "yes") {
          playAgain = false;
          alert("Please Press F5 to Play Again.");
        }
      }
    }
  </script>
</body>

</html>
