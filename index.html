<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="author" content="Jeongman Park">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bear Ninja Hunter</title>
</head>

<body>
  <h1>Bear Ninja Hunter Game</h1>
  <p id="result"></p>

  <script>
    // Available choices stored in an array   
    const choices = ["Bear", "Ninja", "Hunter"];
    let gameHistory = "";
    let playAgain = true;

    //Welcome the player to the game using a prompt to collect their name:
    let playerName = prompt("Welcome to Bear Hunter Ninja! Please enter your name to get started:");

    //Handle cases where user cancels or enters empty/whitespace name
    if (playerName === null || playerName.trim() === "") {
      alert("Please Press F5 to Play Again.");
      document.getElementById("result").innerHTML = "Please Press F5 to Play Again.";
    } else {
      playerName = playerName.trim();

      //Alert to greet the player with a personalized message.
      alert(`Hi ${playerName}! Let's play Bear Ninja Hunter!`);

      while (playAgain) {
        //Prompt the player's choice.
        let playerChoice = prompt("Who are you: Bear, Ninja, or Hunter?");

        //Check for empty or canceled input
        if (playerChoice === null || playerChoice.trim() === "") {
          alert("Please Press F5 to Play Again.");
          document.getElementById("result").innerHTML = "Please Press F5 to Play Again.";
          break;
        }

        //Force case: lowercase then capitalize first letter
        playerChoice = playerChoice.trim().toLowerCase();
        playerChoice = playerChoice.charAt(0).toUpperCase() + playerChoice.slice(1);

        //Add code to handle invalid entry that is not one of the expected choices
        if (!choices.includes(playerChoice)) {
          alert("Invalid Entry\nPlease Press F5 to Play Again.");
          document.getElementById("result").innerHTML = "Invalid Entry<br>Please Press F5 to Play Again.";
          break;
        }

        //Computer choice_randomized
        let randomIndex = Math.floor(Math.random() * choices.length);
        let computerChoice = choices[randomIndex];

        //Variable to store game result message
        let gameMessage = "";

        //Determine the winner using conditionals
        if (computerChoice === "Bear") {
          switch (playerChoice) {
            case "Bear":
              gameMessage = "It's a Tie!!";
              break;
            case "Ninja":
              gameMessage = "You Lose!!";
              break;
            case "Hunter":
              gameMessage = "You Win!!";
              break;
            default:
              gameMessage = "Invalid input.";
              break;
          }
        } else if (computerChoice === "Ninja") {
          switch (playerChoice) {
            case "Bear":
              gameMessage = "You Win!!";
              break;
            case "Ninja":
              gameMessage = "It's a Tie!!";
              break;
            case "Hunter":
              gameMessage = "You Lose!!";
              break;
            default:
              gameMessage = "Invalid input.";
              break;
          }
        } else if (computerChoice === "Hunter") {
          switch (playerChoice) {
            case "Bear":
              gameMessage = "You Lose!!";
              break;
            case "Ninja":
              gameMessage = "You Win!!";
              break;
            case "Hunter":
              gameMessage = "It's a Tie!!";
              break;
            default:
              gameMessage = "Invalid input.";
              break;
          }
        }

        //Display the personalized game results to the html page and announce the winner, as determined by your conditional operations.
        let roundMessage = `${playerName} you chose ${playerChoice}!<br><br>The computer chose ${computerChoice}!<br><br>${gameMessage}<br><br>`;
        gameHistory += roundMessage;
        document.getElementById("result").innerHTML = gameHistory;

        //Log result to the browser console in the same line structure shown (with blank lines)
        console.log(`${playerName} you chose ${playerChoice}!\n\nThe computer chose ${computerChoice}!\n\n${gameMessage}`);

        //Use a prompt to ask Player to play again at the same time game results are displayed. Handle cancel/empty or non-"yes" response to end the session.
        let again = prompt(`${playerName}, would you like to play again, Yes or No?`);
        if (again === null || again.trim() === "" || again.toLowerCase() !== "yes") {
          playAgain = false;
          alert("Please Press F5 to Play Again.");
        }
      }
    }
  </script>
</body>

</html>